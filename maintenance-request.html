<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maintenance Request | GearGuard</title>

    <style>
        /* Base vars from dashboard for standalone, but we link dashboard.css */
        :root {
            --bg-body: #ffffff;
            --bg-card: #f9f9f9;
            /* ... others handled by dashboard.css */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-body);
        }
    </style>

    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/request.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body class="dashboard-active">

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle">‚òÄÔ∏è</button>

    <div class="dashboard-view active">
        <!-- EXACT Dashboard Header Structure -->
        <div class="nav-header">
            <div style="display:flex; align-items:center; gap:20px;">
                <h2 style="margin:0;">GearGuard</h2>
            </div>
            <div class="user-profile">
                <span id="userNameDisplay" style="font-weight:600; margin-right:15px;">Welcome, User</span>
                <button onclick="handleLogout()"
                    style="width:auto; padding: 8px 15px; margin:0; font-size:0.9rem; background: #666;">Logout</button>
            </div>
        </div>

        <!-- EXACT Dashboard Tabs Structure -->
        <div class="nav-tabs">
            <div class="nav-tab" onclick="window.location.href='index.html'" style="cursor: pointer;">Maintenance</div>
            <div class="nav-tab" onclick="window.location.href='maintenance-calendar.html'" style="cursor: pointer;">
                Maintenance Calendar</div>
            <div class="nav-tab" onclick="window.location.href='equipment.html'" style="cursor: pointer;">Equipment
            </div>
            <div class="nav-tab active">Reporting</div>
            <div class="nav-tab" onclick="window.location.href='teams.html'" style="cursor: pointer;">Teams</div>
        </div>

        <div class="request-container">
            <!-- Top Controls / Status -->
            <div class="status-bar-container">
                <div class="header-actions" style="position: absolute; left: 30px; top: 15px;">
                    <button id="newButton" class="btn-worksheet" type="button">New</button>
                </div>

                <div class="status-bar">
                    <div class="status-step active" data-status="new" style="cursor: pointer;">New Request</div>
                    <div class="status-step" data-status="in-progress" style="cursor: pointer;">In Progress</div>
                    <div class="status-step" data-status="repaired" style="cursor: pointer;">Repaired</div>
                    <div class="status-step" data-status="scrap" style="cursor: pointer;">Scrap</div>
                </div>
            </div>

            <!-- Main Header -->
            <header class="request-header">
                <div>
                    <div class="breadcrumb">Maintenance Requests /</div>
                    <h1 class="request-title">
                        <input type="text" id="requestTitle" placeholder="Enter request title" value=""
                            style="border: none; background: transparent; font-size: inherit; font-weight: inherit; width: 100%; outline: none;">
                    </h1>
                </div>
                <div class="status-indicator-circle"></div>
            </header>

            <!-- Form Grid -->
            <form id="maintenanceForm">
                <div class="form-grid">
                    <!-- Left Column -->
                    <div class="col-left">
                        <div class="form-group">
                            <label>Created By</label>
                            <div class="form-field">
                                <input type="text" name="createdBy" id="createdByInput" value="Mitchell Admin"
                                    placeholder="Your name...">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Equipment Name</label>
                            <div class="form-field">
                                <select id="equipmentSelect" name="equipmentName">
                                    <option value="">Select Equipment...</option>
                                    <!-- Dynamic Population -->
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Description</label>
                            <div class="form-field">
                                <input type="text" name="description" placeholder="Short description..." required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Equipment Category</label>
                            <div class="form-field">
                                <select name="equipmentCategory">
                                    <option value="Electronics">Electronics</option>
                                    <option value="Monitors" selected>Monitors</option>
                                    <option value="Furniture">Furniture</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Request Date</label>
                            <div class="form-field">
                                <input type="date" name="requestDate" value="2024-12-16">
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="col-right">
                        <div class="form-group">
                            <label>Type</label>
                            <div class="form-field">
                                <select name="maintenanceType">
                                    <option value="Corrective" selected>Corrective</option>
                                    <option value="Preventive">Preventive</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Team</label>
                            <div class="form-field">
                                <select name="team">
                                    <option value="Internal Maintenance" selected>Internal Maintenance</option>
                                    <option value="External">External Service</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Responsible</label>
                            <div class="form-field">
                                <div class="user-field">
                                    <div class="user-avatar" style="background:#555;"></div>
                                    <select name="responsible" style="width: auto;">
                                        <option value="Mitchell Admin">Mitchell Admin</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Scheduled Date</label>
                            <div class="form-field">
                                <input type="date" name="scheduledDate">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duration</label>
                            <div class="form-field" style="display:flex; align-items:center;">
                                <input type="time" name="duration" value="04:00" style="width: 100px;">
                                <span style="margin-left:10px; font-size:0.9rem; color:#666;">hours:minutes</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Priority</label>
                            <div class="priority-stars" id="priorityStars">
                                <i class="far fa-star priority-icon" data-value="1"></i>
                                <i class="far fa-star priority-icon" data-value="2"></i>
                                <i class="far fa-star priority-icon" data-value="3"></i>
                            </div>
                            <input type="hidden" name="priority" id="priorityInput" value="0">
                        </div>

                        <div class="form-group">
                            <label>Company</label>
                            <div class="form-field">
                                <input type="text" name="company" value="My Company (San Francisco)">
                            </div>
                        </div>
                    </div>
                </div>
            </form>

            <!-- Save Button Area -->
            <div style="padding: 20px 30px; border-top: 1px solid #eee; text-align: right;">
                <button type="submit" form="maintenanceForm" style="width: auto; padding: 10px 20px;">Save
                    Request</button>
            </div>

        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/request.js"></script>
    <script>
        // Auth Logic
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) {
            window.location.href = 'login.html';
        } else {
            document.getElementById('userNameDisplay').textContent = "Welcome, " + currentUser.name;
        }

        // Theme Logic
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const savedTheme = localStorage.getItem('theme') || 'light';

        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            themeToggle.textContent = 'üåô';
        } else {
            themeToggle.textContent = '‚òÄÔ∏è';
        }

        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDark = body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeToggle.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
        });

        function handleLogout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
    </script>
</body>

</html>